#!/bin/bash

#script para fazer parsing de url e levantar dominios

#Valida se algum argumento foi digitado
if [ $# -ne 1 ]
then
	clear
	echo "help"
	echo "Usage $0 dominio"
else
	mkdir $1
	cd $1
	wget  --user-agent="Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.111 Safari/537.36" $1 -o saida-wget.txt
	clear
	grep href index.html  | awk -F '/' '{print $3}' | cut -d "'" -f1 | cut -d '"' -f1 | egrep '^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?$' | sort -u >> lista.txt 
	for dominio in $(cat lista.txt)
	do
		host $dominio | tee -a lista-dominios.txt
	done
fi	
